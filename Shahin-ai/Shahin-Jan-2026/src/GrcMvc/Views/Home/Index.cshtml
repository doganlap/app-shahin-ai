@using Microsoft.AspNetCore.Mvc.Localization
@inject IHtmlLocalizer<SharedResource> L
@{
    ViewData["Title"] = L["Dashboard"].Value;
}

<div class="container-fluid">
    <h1 class="h3 mb-4">
        <i class="bi bi-speedometer2"></i> @L["Dashboard"]
    </h1>

    @if (User.Identity?.IsAuthenticated == true)
    {
        <!-- Statistics Cards -->
        <div class="row mb-4">
            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-danger h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">@L["TotalRisks"]</div>
                                <div class="stat-number text-danger">24</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-exclamation-triangle text-danger" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a asp-controller="Risk" asp-action="Index" class="small text-decoration-none">
                            @L["ViewDetails"] <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-success h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">@L["ActiveControls"]</div>
                                <div class="stat-number text-success">156</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-shield-check text-success" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a href="#" class="small text-decoration-none">
                            @L["ViewDetails"] <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-warning h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">@L["PendingAudits"]</div>
                                <div class="stat-number text-warning">8</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-clipboard-check text-warning" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a href="#" class="small text-decoration-none">
                            @L["ViewDetails"] <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-xl-3 col-md-6 mb-3">
                <div class="card dashboard-card dashboard-card-info h-100">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col">
                                <div class="stat-label">@L["ComplianceScore"]</div>
                                <div class="stat-number text-info">87%</div>
                            </div>
                            <div class="col-auto">
                                <i class="bi bi-graph-up text-info" style="font-size: 2rem;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-transparent">
                        <a href="#" class="small text-decoration-none">
                            @L["ViewDetails"] <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Recent Risks -->
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-exclamation-triangle"></i> @L["RecentRisks"]
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead>
                                    <tr>
                                        <th>@L["RiskName"]</th>
                                        <th>@L["Level"]</th>
                                        <th>@L["Status"]</th>
                                        <th>@L["Actions"]</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Data Breach</td>
                                        <td><span class="badge bg-danger">@L["Status_High"]</span></td>
                                        <td><span class="badge bg-warning">@L["Status_Active"]</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">@L["View"]</a></td>
                                    </tr>
                                    <tr>
                                        <td>System Downtime</td>
                                        <td><span class="badge bg-warning">@L["Status_Medium"]</span></td>
                                        <td><span class="badge bg-success">@L["Mitigated"]</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">@L["View"]</a></td>
                                    </tr>
                                    <tr>
                                        <td>Compliance Violation</td>
                                        <td><span class="badge bg-danger">@L["Status_Critical"]</span></td>
                                        <td><span class="badge bg-warning">@L["Status_Active"]</span></td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">@L["View"]</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <a asp-area="Risk" asp-controller="Risk" asp-action="Index" class="btn btn-sm btn-primary">
                            @L["ViewAllRisks"]
                        </a>
                    </div>
                </div>
            </div>

            <!-- Upcoming Audits -->
            <div class="col-lg-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-calendar-event"></i> @L["UpcomingAudits"]
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-sm table-hover">
                                <thead>
                                    <tr>
                                        <th>@L["AuditTitle"]</th>
                                        <th>@L["AuditType"]</th>
                                        <th>@L["DueDate"]</th>
                                        <th>@L["Actions"]</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Q1 Financial Audit</td>
                                        <td>@L["Internal"]</td>
                                        <td>2024-01-15</td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">@L["View"]</a></td>
                                    </tr>
                                    <tr>
                                        <td>ISO 27001 Compliance</td>
                                        <td>@L["External"]</td>
                                        <td>2024-01-30</td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">@L["View"]</a></td>
                                    </tr>
                                    <tr>
                                        <td>IT Security Assessment</td>
                                        <td>@L["Internal"]</td>
                                        <td>2024-02-10</td>
                                        <td><a href="#" class="btn btn-sm btn-outline-primary">@L["View"]</a></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <a href="#" class="btn btn-sm btn-primary">@L["ViewAllAudits"]</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <i class="bi bi-lightning"></i> @L["QuickActions"]
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 mb-2">
                                <a asp-controller="Risk" asp-action="Create" class="btn btn-primary w-100">
                                    <i class="bi bi-plus-circle"></i> @L["NewRisk"]
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="#" class="btn btn-success w-100">
                                    <i class="bi bi-plus-circle"></i> @L["NewControl"]
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="#" class="btn btn-info w-100">
                                    <i class="bi bi-plus-circle"></i> @L["NewAssessment"]
                                </a>
                            </div>
                            <div class="col-md-3 mb-2">
                                <a href="#" class="btn btn-warning w-100">
                                    <i class="bi bi-file-earmark-bar-graph"></i> @L["GenerateReport"]
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
    else
    {
        <!-- Welcome message for non-authenticated users -->
        <div class="text-center py-5">
            <h1 class="display-4">@L["WelcomeToGrc"]</h1>
            <p class="lead">@L["GrcPlatformDescription"]</p>
            <hr class="my-4">
            <p>@L["PleaseLoginMessage"]</p>
            <p class="mt-4">
                <a href="/Account/Login" class="btn btn-primary btn-lg me-2">
                    <i class="bi bi-box-arrow-in-right"></i> @L["Nav_Login"]
                </a>
                <a asp-controller="Onboarding" asp-action="Index" class="btn btn-success btn-lg">
                    <i class="bi bi-rocket"></i> @L["Nav_Onboarding"]
                </a>
            </p>

            <!-- Demo Access -->
            <div class="mt-4 p-4 bg-light rounded">
                <p class="text-muted mb-2">@L["WantToExplore"]</p>
                <a href="/account/legacy/DemoLogin" class="btn btn-outline-success btn-lg">
                    <i class="bi bi-play-circle"></i> @L["TryDemo"]
                </a>
                <p class="small text-muted mt-2">@L["DemoDescription"]</p>
            </div>
        </div>

        <div class="row mt-5">
            <div class="col-md-4">
                <div class="text-center">
                    <i class="bi bi-shield-check text-primary" style="font-size: 3rem;"></i>
                    <h3>@L["RiskManagement"]</h3>
                    <p>@L["RiskManagementDescription"]</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center">
                    <i class="bi bi-clipboard-check text-success" style="font-size: 3rem;"></i>
                    <h3>@L["ComplianceTracking"]</h3>
                    <p>@L["ComplianceTrackingDescription"]</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center">
                    <i class="bi bi-graph-up text-info" style="font-size: 3rem;"></i>
                    <h3>@L["PerformanceAnalytics"]</h3>
                    <p>@L["PerformanceAnalyticsDescription"]</p>
                </div>
            </div>
        </div>
    }
</div>
