@{
    ViewData["Title"] = "Risk Indicators - Shahin WATCH";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid mt-4">
    <div class="row mb-4">
        <div class="col-md-8">
            <h1 class="h3">
                <i class="fas fa-chart-line text-warning me-2"></i>Shahin WATCH - Risk Indicators
            </h1>
            <p class="text-muted">Monitor Key Risk Indicators (KRIs) and receive real-time alerts</p>
        </div>
        <div class="col-md-4 text-end">
            <a href="@Url.Action("Create")" class="btn btn-primary">
                <i class="fas fa-plus me-2"></i>New KRI
            </a>
            <a href="@Url.Action("Configure")" class="btn btn-outline-secondary">
                <i class="fas fa-cog me-2"></i>Configure
            </a>
        </div>
    </div>

    <!-- KRI Summary Cards -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card bg-success text-white">
                <div class="card-body text-center">
                    <i class="fas fa-check-circle fa-2x mb-2"></i>
                    <h3 id="healthyCount">24</h3>
                    <small>Healthy KRIs</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-warning text-dark">
                <div class="card-body text-center">
                    <i class="fas fa-exclamation-triangle fa-2x mb-2"></i>
                    <h3 id="warningCount">8</h3>
                    <small>Warning</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-danger text-white">
                <div class="card-body text-center">
                    <i class="fas fa-times-circle fa-2x mb-2"></i>
                    <h3 id="criticalCount">3</h3>
                    <small>Critical</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-info text-white">
                <div class="card-body text-center">
                    <i class="fas fa-bell fa-2x mb-2"></i>
                    <h3 id="alertCount">5</h3>
                    <small>Active Alerts</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Active Alerts -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-danger text-white">
            <h5 class="mb-0"><i class="fas fa-bell me-2"></i>Active Alerts</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>KRI</th>
                            <th>Category</th>
                            <th>Current Value</th>
                            <th>Threshold</th>
                            <th>Severity</th>
                            <th>Triggered</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Failed Login Attempts</td>
                            <td><span class="badge bg-primary">Security</span></td>
                            <td class="text-danger fw-bold">156</td>
                            <td>100/hour</td>
                            <td><span class="badge bg-danger">Critical</span></td>
                            <td>2 hours ago</td>
                            <td>
                                <a href="@Url.Action("AlertDetails")?id=1" class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>Evidence Upload Delay</td>
                            <td><span class="badge bg-info">Compliance</span></td>
                            <td class="text-warning fw-bold">5 days</td>
                            <td>3 days</td>
                            <td><span class="badge bg-warning text-dark">Warning</span></td>
                            <td>1 day ago</td>
                            <td>
                                <a href="@Url.Action("AlertDetails")?id=2" class="btn btn-sm btn-outline-warning">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>Overdue Control Assessments</td>
                            <td><span class="badge bg-success">GRC</span></td>
                            <td class="text-danger fw-bold">12</td>
                            <td>5</td>
                            <td><span class="badge bg-danger">Critical</span></td>
                            <td>3 hours ago</td>
                            <td>
                                <a href="@Url.Action("AlertDetails")?id=3" class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- KRI List -->
    <div class="card shadow-sm">
        <div class="card-header">
            <h5 class="mb-0"><i class="fas fa-list me-2"></i>All Risk Indicators</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover" id="kriTable">
                    <thead class="table-light">
                        <tr>
                            <th>KRI Name</th>
                            <th>Category</th>
                            <th>Current</th>
                            <th>Target</th>
                            <th>Trend</th>
                            <th>Status</th>
                            <th>Last Updated</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Compliance Score</td>
                            <td>Compliance</td>
                            <td>87%</td>
                            <td>90%</td>
                            <td><i class="fas fa-arrow-up text-success"></i> +2%</td>
                            <td><span class="badge bg-success">Healthy</span></td>
                            <td>Today</td>
                            <td>
                                <a href="@Url.Action("Details")?id=1" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td>Risk Exposure Index</td>
                            <td>Risk</td>
                            <td>3.2</td>
                            <td>&lt;3.0</td>
                            <td><i class="fas fa-arrow-down text-success"></i> -0.3</td>
                            <td><span class="badge bg-warning text-dark">Warning</span></td>
                            <td>Yesterday</td>
                            <td>
                                <a href="@Url.Action("Details")?id=2" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    $(document).ready(function() {
        // Initialize DataTable if needed
        // $('#kriTable').DataTable();
    });
</script>
}
