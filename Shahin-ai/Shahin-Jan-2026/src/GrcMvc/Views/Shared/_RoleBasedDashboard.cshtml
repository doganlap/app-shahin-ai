@using Microsoft.AspNetCore.Mvc.Localization
@inject IHtmlLocalizer<SharedResource> L
@{
    var userRole = User.IsInRole("Admin") ? "Admin" : 
                   User.IsInRole("ComplianceManager") ? "ComplianceManager" :
                   User.IsInRole("RiskManager") ? "RiskManager" :
                   User.IsInRole("Auditor") ? "Auditor" :
                   User.IsInRole("EvidenceOfficer") ? "EvidenceOfficer" : "User";
    var userName = User.Identity?.Name ?? "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…";
}

<!-- Welcome Section with Role-Based Greeting -->
<div class="welcome-section mb-4">
    <div class="row align-items-center">
        <div class="col-md-8">
            <h2 class="welcome-title mb-2">
                <span class="wave">ğŸ‘‹</span> Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ @userName
            </h2>
            <p class="welcome-subtitle text-muted mb-0">
                @switch (userRole)
                {
                    case "Admin":
                        <text>Ø£Ù†Øª Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…. Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© ÙƒØ§Ù…Ù„Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ù†Ø¸Ø§Ù….</text>
                        break;
                    case "ComplianceManager":
                        <text>Ø£Ù†Øª Ù…Ø¯ÙŠØ± Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„. Ù…Ù‡Ù…ØªÙƒ Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ²Ø§Ù… Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø¨Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ÙŠØ©.</text>
                        break;
                    case "RiskManager":
                        <text>Ø£Ù†Øª Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø®Ø§Ø·Ø±. Ù…Ù‡Ù…ØªÙƒ ØªØ­Ø¯ÙŠØ¯ ÙˆØªÙ‚ÙŠÙŠÙ… ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠØ©.</text>
                        break;
                    case "Auditor":
                        <text>Ø£Ù†Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ. Ù…Ù‡Ù…ØªÙƒ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙØ¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¶ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª.</text>
                        break;
                    case "EvidenceOfficer":
                        <text>Ø£Ù†Øª Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù„Ø©. Ù…Ù‡Ù…ØªÙƒ Ø¬Ù…Ø¹ ÙˆØªÙ†Ø¸ÙŠÙ… Ø£Ø¯Ù„Ø© Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„.</text>
                        break;
                    default:
                        <text>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø­ÙˆÙƒÙ…Ø© ÙˆØ§Ù„Ù…Ø®Ø§Ø·Ø± ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„.</text>
                        break;
                }
            </p>
        </div>
        <div class="col-md-4 text-end">
            <div class="date-widget">
                <div class="date-day" id="current-day"></div>
                <div class="date-full" id="current-date"></div>
            </div>
        </div>
    </div>
</div>

<!-- Role-Specific Quick Stats -->
<div class="row mb-4">
    @if (userRole == "Admin")
    {
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-purple">
                <div class="stat-icon"><i class="bi bi-people-fill"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="users">--</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-green">
                <div class="stat-icon"><i class="bi bi-building"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="tenants">--</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø³ØªØ£Ø¬Ø±ÙˆÙ†</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-blue">
                <div class="stat-icon"><i class="bi bi-activity"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="activities">--</div>
                    <div class="stat-label">Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-orange">
                <div class="stat-icon"><i class="bi bi-bell-fill"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="alerts">--</div>
                    <div class="stat-label">Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª</div>
                </div>
            </div>
        </div>
    }
    else if (userRole == "ComplianceManager" || userRole == "RiskManager")
    {
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-red">
                <div class="stat-icon"><i class="bi bi-exclamation-triangle-fill"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="risks">--</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ù†Ø´Ø·Ø©</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-green">
                <div class="stat-icon"><i class="bi bi-shield-check"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="controls">--</div>
                    <div class="stat-label">Ø§Ù„Ø¶ÙˆØ§Ø¨Ø· Ø§Ù„ÙØ¹Ù‘Ø§Ù„Ø©</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-blue">
                <div class="stat-icon"><i class="bi bi-clipboard-check"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="assessments">--</div>
                    <div class="stat-label">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-teal">
                <div class="stat-icon"><i class="bi bi-percent"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="compliance">--%</div>
                    <div class="stat-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ù…ØªØ«Ø§Ù„</div>
                </div>
            </div>
        </div>
    }
    else if (userRole == "Auditor")
    {
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-purple">
                <div class="stat-icon"><i class="bi bi-search"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="audits">--</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ø§Ù„Ø¬Ø§Ø±ÙŠØ©</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-orange">
                <div class="stat-icon"><i class="bi bi-flag-fill"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="findings">--</div>
                    <div class="stat-label">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø©</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-green">
                <div class="stat-icon"><i class="bi bi-file-earmark-check"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="evidence">--</div>
                    <div class="stat-label">Ø§Ù„Ø£Ø¯Ù„Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 mb-3">
            <div class="stat-card stat-card-blue">
                <div class="stat-icon"><i class="bi bi-calendar-check"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="upcoming">--</div>
                    <div class="stat-label">Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù‚Ø§Ø¯Ù…Ø©</div>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="col-md-4 col-sm-6 mb-3">
            <div class="stat-card stat-card-blue">
                <div class="stat-icon"><i class="bi bi-list-task"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="tasks">--</div>
                    <div class="stat-label">Ù…Ù‡Ø§Ù…ÙŠ</div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-6 mb-3">
            <div class="stat-card stat-card-green">
                <div class="stat-icon"><i class="bi bi-check-circle-fill"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="completed">--</div>
                    <div class="stat-label">Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</div>
                </div>
            </div>
        </div>
        <div class="col-md-4 col-sm-6 mb-3">
            <div class="stat-card stat-card-orange">
                <div class="stat-icon"><i class="bi bi-clock-fill"></i></div>
                <div class="stat-content">
                    <div class="stat-value" data-stat="pending">--</div>
                    <div class="stat-label">Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©</div>
                </div>
            </div>
        </div>
    }
</div>

<!-- Quick Actions Grid -->
<div class="quick-actions-section mb-4">
    <h5 class="section-title mb-3">
        <i class="bi bi-lightning-charge-fill text-warning"></i> Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø³Ø±ÙŠØ¹Ø©
    </h5>
    <div class="row">
        @if (userRole == "Admin")
        {
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Users" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-person-plus-fill"></i></div>
                    <div class="quick-action-label">Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/TenantAdmin" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-gear-fill"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Reports" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-bar-chart-fill"></i></div>
                    <div class="quick-action-label">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Analytics" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-graph-up"></i></div>
                    <div class="quick-action-label">Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/AuditLogs" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-journal-text"></i></div>
                    <div class="quick-action-label">Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Help" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-question-circle-fill"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</div>
                </a>
            </div>
        }
        else if (userRole == "ComplianceManager")
        {
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Assessment/Create" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-plus-circle-fill"></i></div>
                    <div class="quick-action-label">ØªÙ‚ÙŠÙŠÙ… Ø¬Ø¯ÙŠØ¯</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Control" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-shield-check"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ø¶ÙˆØ§Ø¨Ø·</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Evidence" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-file-earmark-check"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ø£Ø¯Ù„Ø©</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Policy" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-file-text"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Reports" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-bar-chart-fill"></i></div>
                    <div class="quick-action-label">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Inbox" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-inbox-fill"></i></div>
                    <div class="quick-action-label">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ§Ø±Ø¯</div>
                </a>
            </div>
        }
        else if (userRole == "RiskManager")
        {
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Risk/Create" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-plus-circle-fill"></i></div>
                    <div class="quick-action-label">Ø®Ø·Ø± Ø¬Ø¯ÙŠØ¯</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Risk" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-exclamation-triangle"></i></div>
                    <div class="quick-action-label">Ø³Ø¬Ù„ Ø§Ù„Ù…Ø®Ø§Ø·Ø±</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/ActionPlan" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-bandaid"></i></div>
                    <div class="quick-action-label">Ø®Ø·Ø· Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Control" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-shield-check"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ø¶ÙˆØ§Ø¨Ø·</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Risk/Report" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-bar-chart-fill"></i></div>
                    <div class="quick-action-label">ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø®Ø§Ø·Ø±</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/KRIDashboard" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-speedometer2"></i></div>
                    <div class="quick-action-label">Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ù…Ø®Ø§Ø·Ø±</div>
                </a>
            </div>
        }
        else if (userRole == "Auditor")
        {
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Audit/Create" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-plus-circle-fill"></i></div>
                    <div class="quick-action-label">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Audit" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-search"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Evidence" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-file-earmark-check"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ø£Ø¯Ù„Ø©</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Audit/Findings" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-flag"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/AuditPackage" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-archive"></i></div>
                    <div class="quick-action-label">Ø­Ø²Ù… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</div>
                </a>
            </div>
            <div class="col-md-2 col-sm-4 col-6 mb-3">
                <a href="/Reports" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-bar-chart-fill"></i></div>
                    <div class="quick-action-label">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
                </a>
            </div>
        }
        else
        {
            <div class="col-md-3 col-sm-4 col-6 mb-3">
                <a href="/Inbox" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-inbox-fill"></i></div>
                    <div class="quick-action-label">ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ§Ø±Ø¯</div>
                </a>
            </div>
            <div class="col-md-3 col-sm-4 col-6 mb-3">
                <a href="/Evidence/Upload" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-cloud-upload"></i></div>
                    <div class="quick-action-label">Ø±ÙØ¹ Ø¯Ù„ÙŠÙ„</div>
                </a>
            </div>
            <div class="col-md-3 col-sm-4 col-6 mb-3">
                <a href="/RoleProfile/MyProfile" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-person-circle"></i></div>
                    <div class="quick-action-label">Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</div>
                </a>
            </div>
            <div class="col-md-3 col-sm-4 col-6 mb-3">
                <a href="/Help" class="quick-action-tile">
                    <div class="quick-action-icon"><i class="bi bi-question-circle-fill"></i></div>
                    <div class="quick-action-label">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</div>
                </a>
            </div>
        }
    </div>
</div>

<!-- Getting Started / Progress Section -->
<div class="row">
    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-transparent border-0 pt-3">
                <h5 class="mb-0">
                    <i class="bi bi-rocket-takeoff text-primary"></i> Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                </h5>
            </div>
            <div class="card-body">
                <div class="progress-tracker">
                    @if (userRole == "Admin")
                    {
                        <div class="progress-step">
                            <div class="progress-step-icon completed"><i class="bi bi-check"></i></div>
                            <div class="progress-step-info">
                                <div class="progress-step-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
                                <div class="progress-step-desc">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­</div>
                            </div>
                        </div>
                        <div class="progress-step">
                            <div class="progress-step-icon current"><i class="bi bi-2-circle"></i></div>
                            <div class="progress-step-info">
                                <div class="progress-step-title">Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ÙØ±ÙŠÙ‚</div>
                                <div class="progress-step-desc">Ø£Ø¶Ù Ø£Ø¹Ø¶Ø§Ø¡ Ø§Ù„ÙØ±ÙŠÙ‚ ÙˆØ­Ø¯Ø¯ Ø£Ø¯ÙˆØ§Ø±Ù‡Ù…</div>
                            </div>
                            <a href="/Users" class="btn btn-sm btn-primary">Ø§Ø¨Ø¯Ø£</a>
                        </div>
                        <div class="progress-step">
                            <div class="progress-step-icon pending"><i class="bi bi-3-circle"></i></div>
                            <div class="progress-step-info">
                                <div class="progress-step-title">ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…</div>
                                <div class="progress-step-desc">Ø®ØµØµ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¤Ø³Ø³Ø©</div>
                            </div>
                        </div>
                        <div class="progress-step">
                            <div class="progress-step-icon pending"><i class="bi bi-4-circle"></i></div>
                            <div class="progress-step-info">
                                <div class="progress-step-title">Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</div>
                                <div class="progress-step-desc">Ø£Ù†Ø´Ø¦ Ø£ÙˆÙ„ ØªÙ‚ÙŠÙŠÙ… Ø§Ù…ØªØ«Ø§Ù„</div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="progress-step">
                            <div class="progress-step-icon completed"><i class="bi bi-check"></i></div>
                            <div class="progress-step-info">
                                <div class="progress-step-title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
                                <div class="progress-step-desc">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­</div>
                            </div>
                        </div>
                        <div class="progress-step">
                            <div class="progress-step-icon current"><i class="bi bi-2-circle"></i></div>
                            <div class="progress-step-info">
                                <div class="progress-step-title">ØªØµÙØ­ Ø§Ù„Ù…Ù‡Ø§Ù…</div>
                                <div class="progress-step-desc">Ø±Ø§Ø¬Ø¹ Ù…Ù‡Ø§Ù…Ùƒ ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙˆØ§Ø±Ø¯</div>
                            </div>
                            <a href="/Inbox" class="btn btn-sm btn-primary">Ø¹Ø±Ø¶</a>
                        </div>
                        <div class="progress-step">
                            <div class="progress-step-icon pending"><i class="bi bi-3-circle"></i></div>
                            <div class="progress-step-info">
                                <div class="progress-step-title">Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…</div>
                                <div class="progress-step-desc">Ø£ÙƒÙ…Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…Ù†Ùƒ</div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6 mb-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header bg-transparent border-0 pt-3">
                <h5 class="mb-0">
                    <i class="bi bi-lightbulb text-warning"></i> Ù†ØµØ§Ø¦Ø­ Ù…ÙÙŠØ¯Ø©
                </h5>
            </div>
            <div class="card-body">
                <div class="tips-carousel">
                    <div class="tip-card active">
                        <div class="tip-icon"><i class="bi bi-robot text-primary"></i></div>
                        <div class="tip-content">
                            <h6>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ø´Ø§Ù‡ÙŠÙ†</h6>
                            <p class="mb-0 text-muted small">Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ø±ÙˆØ¨ÙˆØª ÙÙŠ Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙˆØ±ÙŠØ©.</p>
                        </div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon"><i class="bi bi-keyboard text-success"></i></div>
                        <div class="tip-content">
                            <h6>Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­</h6>
                            <p class="mb-0 text-muted small">Ø§Ø¶ØºØ· <kbd>Ctrl</kbd>+<kbd>K</kbd> Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹.</p>
                        </div>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon"><i class="bi bi-bell text-warning"></i></div>
                        <div class="tip-content">
                            <h6>Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h6>
                            <p class="mb-0 text-muted small">ÙØ¹Ù‘Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„ØªØ¨Ù‚Ù‰ Ø¹Ù„Ù‰ Ø§Ø·Ù„Ø§Ø¹ Ø¨Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©.</p>
                        </div>
                    </div>
                </div>
                <div class="tip-dots text-center mt-3">
                    <span class="tip-dot active" onclick="showTip(0)"></span>
                    <span class="tip-dot" onclick="showTip(1)"></span>
                    <span class="tip-dot" onclick="showTip(2)"></span>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.welcome-section {
    background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
    border-radius: 16px;
    padding: 25px;
}

.welcome-title {
    font-size: 1.75rem;
    font-weight: 700;
}

.wave {
    display: inline-block;
    animation: wave 2.5s infinite;
    transform-origin: 70% 70%;
}

@@keyframes wave {
    0%, 60%, 100% { transform: rotate(0deg); }
    10%, 30% { transform: rotate(14deg); }
    20% { transform: rotate(-8deg); }
    40% { transform: rotate(-4deg); }
    50% { transform: rotate(10deg); }
}

.date-widget {
    text-align: center;
    padding: 15px 25px;
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.date-day {
    font-size: 2rem;
    font-weight: 700;
    color: #667eea;
}

.date-full {
    font-size: 0.9rem;
    color: #666;
}

/* Stat Cards */
.stat-card {
    background: white;
    border-radius: 16px;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    transition: all 0.3s ease;
    border-right: 4px solid transparent;
}

.stat-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.stat-card-purple { border-right-color: #667eea; }
.stat-card-green { border-right-color: #28a745; }
.stat-card-blue { border-right-color: #17a2b8; }
.stat-card-orange { border-right-color: #fd7e14; }
.stat-card-red { border-right-color: #dc3545; }
.stat-card-teal { border-right-color: #20c997; }

.stat-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
}

.stat-card-purple .stat-icon { background: #667eea20; color: #667eea; }
.stat-card-green .stat-icon { background: #28a74520; color: #28a745; }
.stat-card-blue .stat-icon { background: #17a2b820; color: #17a2b8; }
.stat-card-orange .stat-icon { background: #fd7e1420; color: #fd7e14; }
.stat-card-red .stat-icon { background: #dc354520; color: #dc3545; }
.stat-card-teal .stat-icon { background: #20c99720; color: #20c997; }

.stat-value {
    font-size: 1.75rem;
    font-weight: 700;
    color: #333;
}

.stat-label {
    font-size: 0.85rem;
    color: #666;
}

/* Quick Actions */
.quick-action-tile {
    display: block;
    background: white;
    border-radius: 12px;
    padding: 20px 15px;
    text-align: center;
    text-decoration: none;
    color: #333;
    transition: all 0.3s ease;
    border: 1px solid #eee;
}

.quick-action-tile:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-color: transparent;
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
}

.quick-action-tile:hover .quick-action-icon {
    color: white;
}

.quick-action-icon {
    font-size: 1.75rem;
    color: #667eea;
    margin-bottom: 8px;
    transition: color 0.3s;
}

.quick-action-label {
    font-size: 0.85rem;
    font-weight: 500;
}

/* Progress Tracker */
.progress-step {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 12px 0;
    border-bottom: 1px solid #f0f0f0;
}

.progress-step:last-child {
    border-bottom: none;
}

.progress-step-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
}

.progress-step-icon.completed { background: #d4edda; color: #28a745; }
.progress-step-icon.current { background: #cce5ff; color: #0d6efd; }
.progress-step-icon.pending { background: #f8f9fa; color: #6c757d; }

.progress-step-info { flex: 1; }
.progress-step-title { font-weight: 600; margin-bottom: 2px; }
.progress-step-desc { font-size: 0.85rem; color: #666; }

/* Tips */
.tip-card {
    display: none;
    align-items: flex-start;
    gap: 15px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 12px;
}

.tip-card.active {
    display: flex;
}

.tip-icon {
    font-size: 2rem;
}

.tip-dots {
    display: flex;
    gap: 8px;
    justify-content: center;
}

.tip-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #ddd;
    cursor: pointer;
    transition: all 0.3s;
}

.tip-dot.active {
    background: #667eea;
    width: 24px;
    border-radius: 4px;
}
</style>

<script>
// Date widget
function updateDate() {
    const now = new Date();
    const days = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³', 'Ø§Ù„Ø¬Ù…Ø¹Ø©', 'Ø§Ù„Ø³Ø¨Øª'];
    const months = ['ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ', 'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'];
    
    document.getElementById('current-day').textContent = days[now.getDay()];
    document.getElementById('current-date').textContent = `${now.getDate()} ${months[now.getMonth()]} ${now.getFullYear()}`;
}
updateDate();

// Tips carousel
let currentTip = 0;
function showTip(index) {
    document.querySelectorAll('.tip-card').forEach((card, i) => {
        card.classList.toggle('active', i === index);
    });
    document.querySelectorAll('.tip-dot').forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
    });
    currentTip = index;
}

setInterval(() => {
    currentTip = (currentTip + 1) % 3;
    showTip(currentTip);
}, 5000);

// Load real stats from API
async function loadDashboardStats() {
    try {
        const response = await fetch('/api/dashboard/stats');
        if (!response.ok) return;
        
        const data = await response.json();
        if (!data.stats) return;

        // Update stat cards based on role
        const stats = data.stats;
        
        // Map stats to data-stat attributes
        const statMappings = {
            'users': stats.users,
            'tenants': stats.tenants,
            'activities': stats.activities,
            'alerts': stats.alerts,
            'risks': stats.risks,
            'controls': stats.controls,
            'assessments': stats.assessments,
            'compliance': stats.compliance ? stats.compliance + '%' : null,
            'audits': stats.audits,
            'findings': stats.findings,
            'evidence': stats.evidence,
            'upcoming': stats.upcoming,
            'tasks': stats.tasks,
            'completed': stats.completed,
            'pending': stats.pending
        };

        Object.entries(statMappings).forEach(([key, value]) => {
            if (value !== null && value !== undefined) {
                const el = document.querySelector(`[data-stat="${key}"]`);
                if (el) {
                    el.textContent = value;
                    el.classList.add('fade-in');
                }
            }
        });
    } catch (error) {
    }
}

// Load stats on page load
document.addEventListener('DOMContentLoaded', loadDashboardStats);
</script>
