@model List<GrcMvc.Models.Entities.Tenant>
@{
    ViewData["Title"] = "Feature Flags";
    Layout = "_Layout";
}

<div class="container-fluid py-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-1">
            <li class="breadcrumb-item"><a href="@Url.Action("Dashboard")">Platform Admin</a></li>
            <li class="breadcrumb-item active">Feature Flags</li>
        </ol>
    </nav>

    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 mb-1">Feature Flags</h1>
            <p class="text-muted mb-0">Manage platform-wide and tenant-specific feature toggles</p>
        </div>
    </div>

    <!-- Platform-wide Feature Flags -->
    <div class="card mb-4">
        <div class="card-header bg-transparent">
            <h5 class="mb-0"><i class="bi bi-toggles"></i> Platform-wide Features</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>Feature</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>AI-Powered Assessments</strong></td>
                            <td>Enable AI-generated compliance assessment recommendations</td>
                            <td><span class="badge bg-success">Enabled</span></td>
                            <td>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked disabled>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Real-time Notifications</strong></td>
                            <td>Push notifications for workflow events</td>
                            <td><span class="badge bg-success">Enabled</span></td>
                            <td>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked disabled>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Advanced Analytics</strong></td>
                            <td>Enhanced reporting and dashboard analytics</td>
                            <td><span class="badge bg-warning">Beta</span></td>
                            <td>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked disabled>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Bulk Import/Export</strong></td>
                            <td>CSV/Excel import and export functionality</td>
                            <td><span class="badge bg-secondary">Disabled</span></td>
                            <td>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" disabled>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Third-party Integrations</strong></td>
                            <td>API integrations with external systems</td>
                            <td><span class="badge bg-success">Enabled</span></td>
                            <td>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked disabled>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Multi-language Support</strong></td>
                            <td>Arabic and English localization</td>
                            <td><span class="badge bg-success">Enabled</span></td>
                            <td>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" checked disabled>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Tenant-specific Overrides -->
    <div class="card">
        <div class="card-header bg-transparent">
            <h5 class="mb-0"><i class="bi bi-building"></i> Tenant Feature Overrides</h5>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>Tenant</th>
                            <th>Tier</th>
                            <th>AI Features</th>
                            <th>Advanced Analytics</th>
                            <th>Bulk Operations</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var tenant in Model)
                        {
                            <tr>
                                <td>
                                    <a href="@Url.Action("TenantDetails", new { id = tenant.Id })">@tenant.OrganizationName</a>
                                    <br><small class="text-muted">/@tenant.TenantSlug</small>
                                </td>
                                <td>
                                    <span class="badge bg-@(tenant.SubscriptionTier == "Enterprise" ? "dark" : tenant.SubscriptionTier == "Professional" ? "primary" : "secondary")">
                                        @tenant.SubscriptionTier
                                    </span>
                                </td>
                                <td>
                                    <span class="badge bg-@(tenant.SubscriptionTier != "MVP" ? "success" : "secondary")">
                                        @(tenant.SubscriptionTier != "MVP" ? "Enabled" : "Disabled")
                                    </span>
                                </td>
                                <td>
                                    <span class="badge bg-@(tenant.SubscriptionTier == "Enterprise" ? "success" : "secondary")">
                                        @(tenant.SubscriptionTier == "Enterprise" ? "Enabled" : "Disabled")
                                    </span>
                                </td>
                                <td>
                                    <span class="badge bg-@(tenant.SubscriptionTier == "Enterprise" ? "success" : "secondary")">
                                        @(tenant.SubscriptionTier == "Enterprise" ? "Enabled" : "Disabled")
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary" disabled title="Feature override management coming soon">
                                        <i class="bi bi-gear"></i>
                                    </button>
                                </td>
                            </tr>
                        }
                        @if (!Model.Any())
                        {
                            <tr>
                                <td colspan="6" class="text-center py-4 text-muted">No tenants configured</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
        <div class="card-footer text-muted">
            @Model.Count tenants
        </div>
    </div>

    <div class="alert alert-info mt-4">
        <i class="bi bi-info-circle"></i>
        <strong>Note:</strong> Feature flag management is currently read-only. Feature toggles are determined by subscription tier.
        Contact support for custom feature configurations.
    </div>
</div>
