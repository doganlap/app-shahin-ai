@using Microsoft.AspNetCore.Mvc.Localization
@inject IHtmlLocalizer<SharedResource> L
@{
    ViewData["Title"] = "مركز المساعدة - Help Center";
    ViewData["MetaDescription"] = "مركز المساعدة لمنصة شاهين - احصل على إجابات لأسئلتك حول إدارة الحوكمة والمخاطر والامتثال";
    Layout = "_LandingLayout";
}

<main style="padding-top: 100px; min-height: 100vh;">
    <!-- Hero Section -->
    <section class="container" style="max-width: 1200px; padding: 4rem 2rem 2rem 2rem;">
        <div class="section-header fade-up text-center">
            <div class="section-badge" style="margin: 0 auto;">
                <i class="bi bi-life-preserver"></i>
                <span>مركز المساعدة</span>
            </div>
            <h1 class="section-title">كيف يمكننا مساعدتك؟</h1>
            <p class="section-subtitle" style="max-width: 600px; margin: 1rem auto;">
                ابحث عن إجابات، شاهد الإرشادات، أو تواصل مع فريق الدعم
            </p>
        </div>

        <!-- Search Box -->
        <div class="fade-up" style="margin: 2rem auto; max-width: 700px;">
            <div class="search-box" style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 50px; padding: 0.75rem 1.5rem; display: flex; align-items: center; gap: 1rem;">
                <i class="bi bi-search" style="font-size: 1.25rem; color: rgba(248, 250, 252, 0.5);"></i>
                <input type="text" id="helpSearch" placeholder="ابحث عن موضوع..." style="flex: 1; background: transparent; border: none; outline: none; color: var(--light); font-size: 1rem; font-family: inherit;">
                <button class="btn btn-primary" onclick="searchHelp()" style="border-radius: 30px; padding: 0.5rem 1.5rem;">بحث</button>
            </div>
            <div id="searchResults" style="margin-top: 1rem; display: none;"></div>
        </div>
    </section>

    <!-- Popular Topics -->
    <section class="container" style="max-width: 1200px; padding: 2rem;">
        <h2 class="fade-up" style="font-size: 1.75rem; font-weight: 700; margin-bottom: 2rem; text-align: center;">المواضيع الشائعة</h2>

        <div class="help-categories fade-up" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
            <!-- Getting Started -->
            <div class="help-category-card">
                <div class="icon-circle" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(59, 130, 246, 0.2)); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                    <i class="bi bi-rocket-takeoff" style="font-size: 1.75rem; color: var(--primary);"></i>
                </div>
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">البدء السريع</h3>
                <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 1.5rem; font-size: 0.95rem;">
                    تعلم كيفية إعداد حسابك والخطوات الأولى في المنصة
                </p>
                <ul class="help-links">
                    <li><a href="#create-account">إنشاء حساب جديد</a></li>
                    <li><a href="#first-assessment">تشغيل أول تقييم امتثال</a></li>
                    <li><a href="#invite-team">دعوة أعضاء الفريق</a></li>
                    <li><a href="#dashboard-overview">نظرة عامة على لوحة التحكم</a></li>
                </ul>
            </div>

            <!-- Risk Management -->
            <div class="help-category-card">
                <div class="icon-circle" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(251, 146, 60, 0.2)); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                    <i class="bi bi-exclamation-triangle" style="font-size: 1.75rem; color: #ef4444;"></i>
                </div>
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">إدارة المخاطر</h3>
                <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 1.5rem; font-size: 0.95rem;">
                    كيفية تحديد، تقييم، ومراقبة المخاطر بفعالية
                </p>
                <ul class="help-links">
                    <li><a href="#create-risk">إنشاء سجل مخاطرة جديد</a></li>
                    <li><a href="#risk-matrix">فهم مصفوفة المخاطر</a></li>
                    <li><a href="#risk-scoring">كيفية حساب درجة المخاطر</a></li>
                    <li><a href="#link-controls">ربط الضوابط بالمخاطر</a></li>
                    <li><a href="#risk-reports">تقارير المخاطر</a></li>
                </ul>
            </div>

            <!-- Compliance -->
            <div class="help-category-card">
                <div class="icon-circle" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.2)); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                    <i class="bi bi-shield-check" style="font-size: 1.75rem; color: #3b82f6;"></i>
                </div>
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">الامتثال التنظيمي</h3>
                <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 1.5rem; font-size: 0.95rem;">
                    إدارة متطلبات الامتثال للجهات الرقابية
                </p>
                <ul class="help-links">
                    <li><a href="#scope-derivation">اشتقاق نطاق الامتثال</a></li>
                    <li><a href="#framework-selection">اختيار الأطر التنظيمية</a></li>
                    <li><a href="#assessment-run">تشغيل تقييم امتثال</a></li>
                    <li><a href="#evidence-upload">رفع وثائق الامتثال</a></li>
                    <li><a href="#compliance-reports">تقارير الامتثال</a></li>
                </ul>
            </div>

            <!-- Controls -->
            <div class="help-category-card">
                <div class="icon-circle" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2)); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                    <i class="bi bi-sliders" style="font-size: 1.75rem; color: var(--primary);"></i>
                </div>
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">الضوابط الداخلية</h3>
                <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 1.5rem; font-size: 0.95rem;">
                    تصميم واختبار وتوثيق الضوابط الرقابية
                </p>
                <ul class="help-links">
                    <li><a href="#control-library">مكتبة الضوابط</a></li>
                    <li><a href="#control-testing">اختبار فعالية الضوابط</a></li>
                    <li><a href="#control-design">تصميم ضوابط مخصصة</a></li>
                    <li><a href="#control-mapping">ربط الضوابط بالمتطلبات</a></li>
                </ul>
            </div>

            <!-- Integrations -->
            <div class="help-category-card">
                <div class="icon-circle" style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(236, 72, 153, 0.2)); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                    <i class="bi bi-plug" style="font-size: 1.75rem; color: #a855f7;"></i>
                </div>
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">التكاملات والربط</h3>
                <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 1.5rem; font-size: 0.95rem;">
                    ربط المنصة مع الأنظمة الأخرى
                </p>
                <ul class="help-links">
                    <li><a href="#api-access">الوصول إلى API</a></li>
                    <li><a href="#sso-setup">إعداد تسجيل الدخول الموحد (SSO)</a></li>
                    <li><a href="#webhook-config">إعداد Webhooks</a></li>
                    <li><a href="#data-export">تصدير البيانات</a></li>
                </ul>
            </div>

            <!-- Account & Settings -->
            <div class="help-category-card">
                <div class="icon-circle" style="background: linear-gradient(135deg, rgba(251, 146, 60, 0.2), rgba(245, 158, 11, 0.2)); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem;">
                    <i class="bi bi-gear" style="font-size: 1.75rem; color: #fb923c;"></i>
                </div>
                <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem;">الحساب والإعدادات</h3>
                <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 1.5rem; font-size: 0.95rem;">
                    إدارة حسابك والصلاحيات والإعدادات
                </p>
                <ul class="help-links">
                    <li><a href="#user-roles">الأدوار والصلاحيات</a></li>
                    <li><a href="#billing">الفوترة والاشتراكات</a></li>
                    <li><a href="#notifications">إعدادات الإشعارات</a></li>
                    <li><a href="#security-settings">إعدادات الأمان</a></li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Video Tutorials -->
    <section class="container" style="max-width: 1200px; padding: 4rem 2rem;">
        <div class="section-header fade-up text-center" style="margin-bottom: 3rem;">
            <div class="section-badge" style="margin: 0 auto;">
                <i class="bi bi-play-circle"></i>
                <span>الإرشادات المرئية</span>
            </div>
            <h2 class="section-title" style="font-size: 2rem;">دروس فيديو تعليمية</h2>
            <p class="section-subtitle" style="max-width: 600px; margin: 1rem auto;">
                شاهد الفيديوهات التعليمية لتتعلم كيفية استخدام المنصة بكفاءة
            </p>
        </div>

        <div class="video-grid fade-up" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
            <div class="video-card">
                <div class="video-thumbnail" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1)); aspect-ratio: 16/9; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; cursor: pointer; border: 1px solid var(--glass-border);">
                    <i class="bi bi-play-circle" style="font-size: 3rem; color: var(--primary);"></i>
                </div>
                <h4 style="font-weight: 600; margin-bottom: 0.5rem;">جولة سريعة في المنصة</h4>
                <p style="color: rgba(248, 250, 252, 0.6); font-size: 0.9rem;">نظرة شاملة على جميع وظائف شاهين GRC (5 دقائق)</p>
            </div>

            <div class="video-card">
                <div class="video-thumbnail" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(251, 146, 60, 0.1)); aspect-ratio: 16/9; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; cursor: pointer; border: 1px solid var(--glass-border);">
                    <i class="bi bi-play-circle" style="font-size: 3rem; color: #ef4444;"></i>
                </div>
                <h4 style="font-weight: 600; margin-bottom: 0.5rem;">إدارة المخاطر من البداية</h4>
                <p style="color: rgba(248, 250, 252, 0.6); font-size: 0.9rem;">كيفية إنشاء سجل المخاطر وتقييم المخاطر (8 دقائق)</p>
            </div>

            <div class="video-card">
                <div class="video-thumbnail" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1)); aspect-ratio: 16/9; border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; cursor: pointer; border: 1px solid var(--glass-border);">
                    <i class="bi bi-play-circle" style="font-size: 3rem; color: #3b82f6;"></i>
                </div>
                <h4 style="font-weight: 600; margin-bottom: 0.5rem;">تشغيل تقييم امتثال</h4>
                <p style="color: rgba(248, 250, 252, 0.6); font-size: 0.9rem;">خطوات إجراء تقييم امتثال كامل (12 دقيقة)</p>
            </div>
        </div>

        <div class="text-center fade-up" style="margin-top: 2rem;">
            <a href="/webinars" class="btn btn-outline" style="padding: 0.75rem 2rem;">
                <i class="bi bi-collection-play"></i> شاهد جميع الفيديوهات
            </a>
        </div>
    </section>

    <!-- Quick Links -->
    <section class="container" style="max-width: 1200px; padding: 2rem;">
        <div class="quick-links-grid fade-up" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            <a href="/docs" class="quick-link-card" style="text-decoration: none;">
                <i class="bi bi-file-earmark-text" style="font-size: 2rem; color: var(--primary); margin-bottom: 0.75rem;"></i>
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--light);">التوثيق الفني</h4>
                <p style="color: rgba(248, 250, 252, 0.6); font-size: 0.9rem;">وثائق API الكاملة ودليل المطورين</p>
            </a>

            <a href="/faq" class="quick-link-card" style="text-decoration: none;">
                <i class="bi bi-question-circle" style="font-size: 2rem; color: var(--primary); margin-bottom: 0.75rem;"></i>
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--light);">الأسئلة الشائعة</h4>
                <p style="color: rgba(248, 250, 252, 0.6); font-size: 0.9rem;">إجابات للأسئلة الأكثر شيوعاً</p>
            </a>

            <a href="/contact" class="quick-link-card" style="text-decoration: none;">
                <i class="bi bi-headset" style="font-size: 2rem; color: var(--primary); margin-bottom: 0.75rem;"></i>
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--light);">تواصل مع الدعم</h4>
                <p style="color: rgba(248, 250, 252, 0.6); font-size: 0.9rem;">فريق الدعم متاح 24/7 لمساعدتك</p>
            </a>

            <a href="/status" class="quick-link-card" style="text-decoration: none;">
                <i class="bi bi-activity" style="font-size: 2rem; color: var(--primary); margin-bottom: 0.75rem;"></i>
                <h4 style="font-weight: 600; margin-bottom: 0.5rem; color: var(--light);">حالة النظام</h4>
                <p style="color: rgba(248, 250, 252, 0.6); font-size: 0.9rem;">تحقق من حالة الخدمات والصيانة</p>
            </a>
        </div>
    </section>

    <!-- Support CTA -->
    <section class="container" style="max-width: 800px; padding: 4rem 2rem;">
        <div class="support-cta fade-up" style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 20px; padding: 3rem; text-align: center;">
            <i class="bi bi-chat-dots" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;"></i>
            <h3 style="font-size: 1.75rem; font-weight: 700; margin-bottom: 1rem;">هل تحتاج مساعدة إضافية؟</h3>
            <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 2rem; font-size: 1.05rem;">
                فريق الخبراء لدينا جاهز لمساعدتك في أي وقت
            </p>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <a href="/contact" class="btn btn-primary" style="padding: 0.75rem 2rem;">
                    <i class="bi bi-envelope-fill"></i> راسلنا
                </a>
                <a href="mailto:support@shahin-ai.com" class="btn btn-outline" style="padding: 0.75rem 2rem;">
                    <i class="bi bi-envelope"></i> support@shahin-ai.com
                </a>
            </div>
            <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--glass-border);">
                <p style="color: rgba(248, 250, 252, 0.5); font-size: 0.9rem;">
                    <i class="bi bi-clock"></i> أوقات العمل: الأحد - الخميس، 9:00 ص - 6:00 م (UTC+3)
                </p>
            </div>
        </div>
    </section>
</main>

@section Styles {
<style>
    .help-category-card {
        background: var(--glass);
        border: 1px solid var(--glass-border);
        border-radius: 16px;
        padding: 2rem;
        transition: all 0.3s ease;
    }

    .help-category-card:hover {
        border-color: rgba(16, 185, 129, 0.3);
        transform: translateY(-5px);
        box-shadow: 0 10px 40px rgba(16, 185, 129, 0.1);
    }

    .help-links {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .help-links li {
        margin-bottom: 0.75rem;
    }

    .help-links a {
        color: rgba(248, 250, 252, 0.7);
        text-decoration: none;
        font-size: 0.95rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.2s ease;
    }

    .help-links a:before {
        content: "←";
        color: var(--primary);
        font-weight: bold;
    }

    .help-links a:hover {
        color: var(--primary);
        padding-right: 0.5rem;
    }

    .quick-link-card {
        background: var(--glass);
        border: 1px solid var(--glass-border);
        border-radius: 16px;
        padding: 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: all 0.3s ease;
    }

    .quick-link-card:hover {
        border-color: rgba(16, 185, 129, 0.3);
        transform: translateY(-5px);
        background: rgba(16, 185, 129, 0.05);
    }

    .video-card {
        transition: transform 0.3s ease;
    }

    .video-card:hover {
        transform: translateY(-5px);
    }

    .video-thumbnail:hover {
        border-color: rgba(16, 185, 129, 0.5) !important;
    }

    .video-thumbnail:hover i {
        transform: scale(1.1);
    }

    .search-box:focus-within {
        border-color: rgba(16, 185, 129, 0.5);
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }
</style>
}

@section Scripts {
<script>
    function searchHelp() {
        const query = document.getElementById('helpSearch').value.trim();
        const resultsDiv = document.getElementById('searchResults');

        if (!query) {
            resultsDiv.style.display = 'none';
            return;
        }

        // Simple search implementation
        resultsDiv.innerHTML = `
            <div style="background: var(--glass); border: 1px solid var(--glass-border); border-radius: 16px; padding: 1.5rem;">
                <p style="color: rgba(248, 250, 252, 0.6); margin-bottom: 1rem;">
                    <i class="bi bi-search"></i> نتائج البحث عن: <strong style="color: var(--primary);">${query}</strong>
                </p>
                <p style="color: rgba(248, 250, 252, 0.5);">
                    يتم تطوير وظيفة البحث حالياً. يمكنك تصفح المواضيع أعلاه أو <a href="/contact" style="color: var(--primary);">التواصل مع الدعم</a>.
                </p>
            </div>
        `;
        resultsDiv.style.display = 'block';
    }

    // Search on Enter key
    document.getElementById('helpSearch')?.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchHelp();
        }
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
                // If section doesn't exist yet, show message
                alert('هذا القسم قيد التطوير. يمكنك التواصل مع الدعم للمساعدة.');
            }
        });
    });
</script>
}
