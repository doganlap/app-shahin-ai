@{
    ViewData["Title"] = "GRC Glossary";
    var currentCulture = Context.Request.Cookies["GrcMvc.Culture"] ?? "ar";
    var isRtl = currentCulture == "ar";
}

<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a asp-controller="Help" asp-action="Index">@(isRtl ? "مركز المساعدة" : "Help Center")</a></li>
                    <li class="breadcrumb-item active" aria-current="page">@(isRtl ? "المسرد" : "Glossary")</li>
                </ol>
            </nav>

            <h1 class="mb-4">
                <i class="bi bi-book text-info me-2"></i>
                @(isRtl ? "مسرد مصطلحات GRC" : "GRC Glossary")
            </h1>
        </div>
    </div>

    <!-- Search Bar -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" id="glossarySearch" class="form-control" 
                       placeholder="@(isRtl ? "ابحث في المسرد..." : "Search glossary...")"
                       onkeyup="filterGlossary()">
            </div>
        </div>
        <div class="col-md-6 text-end">
            <div class="btn-group" role="group">
                <button type="button" class="btn btn-outline-primary active" onclick="filterByCategory('all')">
                    @(isRtl ? "الكل" : "All")
                </button>
                <button type="button" class="btn btn-outline-primary" onclick="filterByCategory('Framework')">
                    @(isRtl ? "الأطر" : "Frameworks")
                </button>
                <button type="button" class="btn btn-outline-primary" onclick="filterByCategory('Control')">
                    @(isRtl ? "الضوابط" : "Controls")
                </button>
                <button type="button" class="btn btn-outline-primary" onclick="filterByCategory('Risk')">
                    @(isRtl ? "المخاطر" : "Risks")
                </button>
            </div>
        </div>
    </div>

    <!-- Glossary Terms -->
    <div class="row" id="glossaryTerms">
        <!-- Terms will be loaded here -->
        <div class="col-md-6 mb-3">
            <div class="card h-100 glossary-term-card" data-category="Framework">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">NCA ECC</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>@(isRtl ? "التعريف:" : "Definition:")</strong><br>
                        @(isRtl ? "ضوابط الأمن السيبراني الأساسية للهيئة الوطنية للأمن السيبراني" : "National Cybersecurity Authority Essential Cybersecurity Controls")
                    </p>
                    <p class="card-text">
                        <strong>@(isRtl ? "الفئة:" : "Category:")</strong> Framework
                    </p>
                    <p class="card-text">
                        <small class="text-muted">
                            @(isRtl ? "إطار إلزامي للأمن السيبراني في المملكة العربية السعودية" : "Mandatory cybersecurity framework in Saudi Arabia")
                        </small>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="card h-100 glossary-term-card" data-category="Framework">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">SAMA CSF</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>@(isRtl ? "التعريف:" : "Definition:")</strong><br>
                        @(isRtl ? "إطار الأمن السيبراني للهيئة النقدية السعودية" : "Saudi Arabian Monetary Authority Cyber Security Framework")
                    </p>
                    <p class="card-text">
                        <strong>@(isRtl ? "الفئة:" : "Category:")</strong> Framework
                    </p>
                    <p class="card-text">
                        <small class="text-muted">
                            @(isRtl ? "إطار مخصص للمؤسسات المالية" : "Framework for financial institutions")
                        </small>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="card h-100 glossary-term-card" data-category="Framework">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">PDPL</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>@(isRtl ? "التعريف:" : "Definition:")</strong><br>
                        @(isRtl ? "قانون حماية البيانات الشخصية" : "Personal Data Protection Law")
                    </p>
                    <p class="card-text">
                        <strong>@(isRtl ? "الفئة:" : "Category:")</strong> Framework
                    </p>
                    <p class="card-text">
                        <small class="text-muted">
                            @(isRtl ? "نظام حماية البيانات في المملكة العربية السعودية" : "Data protection regulation in Saudi Arabia")
                        </small>
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="card h-100 glossary-term-card" data-category="Control">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">@(isRtl ? "الضابط" : "Control")</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>@(isRtl ? "التعريف:" : "Definition:")</strong><br>
                        @(isRtl ? "إجراء أو آلية أمنية مصممة لمنع أو اكتشاف أو تصحيح مخاطر أمنية" : "A security measure or mechanism designed to prevent, detect, or correct security risks")
                    </p>
                    <p class="card-text">
                        <strong>@(isRtl ? "الفئة:" : "Category:")</strong> Control
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="card h-100 glossary-term-card" data-category="Risk">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">@(isRtl ? "المخاطرة" : "Risk")</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>@(isRtl ? "التعريف:" : "Definition:")</strong><br>
                        @(isRtl ? "احتمالية حدوث حدث قد يؤثر سلباً على أهداف المنظمة" : "The probability of an event occurring that could negatively impact organizational objectives")
                    </p>
                    <p class="card-text">
                        <strong>@(isRtl ? "الفئة:" : "Category:")</strong> Risk
                    </p>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="card h-100 glossary-term-card" data-category="Control">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">@(isRtl ? "الخط الأساسي" : "Baseline")</h5>
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <strong>@(isRtl ? "التعريف:" : "Definition:")</strong><br>
                        @(isRtl ? "الحد الأدنى من الضوابط المطلوبة للامتثال" : "The minimum set of controls required for compliance")
                    </p>
                    <p class="card-text">
                        <strong>@(isRtl ? "الفئة:" : "Category:")</strong> Control
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function filterGlossary() {
        const searchTerm = document.getElementById('glossarySearch').value.toLowerCase();
        const cards = document.querySelectorAll('.glossary-term-card');
        
        cards.forEach(card => {
            const text = card.textContent.toLowerCase();
            if (text.includes(searchTerm)) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    }

    function filterByCategory(category) {
        const cards = document.querySelectorAll('.glossary-term-card');
        const buttons = document.querySelectorAll('.btn-group button');
        
        buttons.forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        cards.forEach(card => {
            if (category === 'all' || card.dataset.category === category) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    }
</script>
